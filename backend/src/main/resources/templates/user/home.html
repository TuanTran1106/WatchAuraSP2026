<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang ch·ªß - WatchAura</title>
    <link rel="stylesheet" th:href="@{/css/home.css}">
</head>
<body>

<div th:fragment="content" class="home-page">
    <div th:if="${success}" class="alert alert--success" th:text="${success}"></div>
    <div th:if="${error}" class="alert alert--error" th:text="${error}"></div>

    <!-- Hero / Banner -->
    <section class="hero">
        <div class="hero__inner container">
            <div class="hero__content">
                <h1 class="hero__title">ƒê·ªìng H·ªì Ch√≠nh H√£ng</h1>
                <p class="hero__subtitle">Kh√°m ph√° b·ªô s∆∞u t·∫≠p ƒë·ªìng h·ªì cao c·∫•p ‚Äì Phong c√°ch, tin c·∫≠y, ƒë·∫≥ng c·∫•p th·ªùi gian.</p>
                <a th:href="@{/san-pham}" class="btn btn--primary hero__cta">Xem s·∫£n ph·∫©m</a>
            </div>
            <div class="hero__visual">
                <div class="hero__img-wrap"></div>
            </div>
        </div>
    </section>

    <!-- Danh m·ª•c -->
    <section class="section categories">
        <div class="container">
            <h2 class="section__title">Danh m·ª•c s·∫£n ph·∫©m</h2>
            <div class="categories__grid" th:if="${danhMucList != null and !danhMucList.isEmpty()}">
                <a th:each="dm : ${danhMucList}" th:href="@{/san-pham(danhMucId=${dm.id})}" class="category-card">
                    <span class="category-card__icon">‚åö</span>
                    <span class="category-card__name" th:text="${dm.tenDanhMuc}">Danh m·ª•c</span>
                </a>
            </div>
            <p th:if="${danhMucList == null or danhMucList.isEmpty()}" class="section__empty">Ch∆∞a c√≥ danh m·ª•c.</p>
        </div>
    </section>

    <!-- S·∫£n ph·∫©m n·ªïi b·∫≠t -->
    <section class="section products">
        <div class="container">
            <div class="section__head">
                <h2 class="section__title">S·∫£n ph·∫©m n·ªïi b·∫≠t</h2>
                <a th:href="@{/san-pham}" class="link-more">Xem t·∫•t c·∫£ ‚Üí</a>
            </div>
            <div class="products__grid" th:if="${sanPhamTrangChu != null and !sanPhamTrangChu.isEmpty()}">
                <div th:each="sp : ${sanPhamTrangChu}" class="product-card">
                    <a th:href="@{/san-pham/{id}(id=${sp.id})}" class="product-card__link">
                        <div class="product-card__img-wrap">
                            <img th:if="${sp.hinhAnh != null and !sp.hinhAnh.isEmpty()}" th:src="@{'/uploads/' + ${sp.hinhAnh}}" th:alt="${sp.tenSanPham}" class="product-card__img">
                            <div th:if="${sp.hinhAnh == null or sp.hinhAnh.isEmpty()}" class="product-card__placeholder">‚åö</div>
                        </div>
                        <div class="product-card__info">
                            <h3 class="product-card__name" th:text="${sp.tenSanPham}">T√™n s·∫£n ph·∫©m</h3>
                            <p class="product-card__brand" th:if="${sp.tenThuongHieu}" th:text="${sp.tenThuongHieu}">Th∆∞∆°ng hi·ªáu</p>
                            <p class="product-card__price" th:if="${sp.giaBan != null}">
                                <span th:text="|${#numbers.formatDecimal(sp.giaBan, 0, 'COMMA', 0, 'POINT')} ‚Ç´|">0 ‚Ç´</span>
                            </p>
                            <p class="product-card__price product-card__price--na" th:if="${sp.giaBan == null}">Li√™n h·ªá</p>
                        </div>
                    </a>
                    <div class="product-card__actions">
                        <a th:href="@{/san-pham/{id}(id=${sp.id})}" class="btn btn--outline btn--sm">Xem chi ti·∫øt</a>
                        <th:block th:if="${firstVariantIdByProductId != null and firstVariantIdByProductId[__${sp.id}__] != null}">
                            <form th:action="@{/gio-hang/them}" method="post" class="product-card__form-inline">
                                <input type="hidden" name="sanPhamChiTietId" th:value="${firstVariantIdByProductId[__${sp.id}__]}">
                                <input type="hidden" name="soLuong" value="1">
                                <input type="hidden" name="redirectUrl" th:value="@{/}">
                                <button type="submit" class="btn btn--primary btn--sm">Th√™m v√†o gi·ªè</button>
                            </form>
                        </th:block>
                    </div>
                </div>
            </div>
            <p th:if="${sanPhamTrangChu == null or sanPhamTrangChu.isEmpty()}" class="section__empty">Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o.</p>
        </div>
    </section>

    <!-- Khuy·∫øn m√£i -->
    <section class="section promotions" th:if="${khuyenMaiDangChay != null and !khuyenMaiDangChay.isEmpty()}">
        <div class="container">
            <h2 class="section__title">Khuy·∫øn m√£i ƒëang di·ªÖn ra</h2>
            <div class="promo-list">
                <div th:each="km : ${khuyenMaiDangChay}" class="promo-card">
                    <div class="promo-card__content">
                        <h3 class="promo-card__title" th:text="${km.tenChuongTrinh}">T√™n ch∆∞∆°ng tr√¨nh</h3>
                        <p class="promo-card__desc" th:text="${km.moTa}">M√¥ t·∫£</p>
                        <p class="promo-card__value">
                            <span th:if="${km.loaiGiam == 'PHAN_TRAM'}" th:text="'Gi·∫£m ' + ${km.giaTriGiam} + '%'">Gi·∫£m %</span>
                            <span th:if="${km.loaiGiam == 'TIEN'}" th:text="'Gi·∫£m ' + ${#numbers.formatDecimal(km.giaTriGiam, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'">Gi·∫£m ti·ªÅn</span>
                        </p>
                        <p class="promo-card__date" th:if="${km.ngayKetThuc != null}" th:text="|ƒê·∫øn h·∫øt ${#temporals.format(km.ngayKetThuc, 'dd/MM/yyyy')}|">H·∫øt h·∫°n</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Th∆∞∆°ng hi·ªáu -->
    <section class="section brands" th:if="${thuongHieuList != null and !thuongHieuList.isEmpty()}">
        <div class="container">
            <h2 class="section__title">Th∆∞∆°ng hi·ªáu ƒë·ªìng h√†nh</h2>
            <div class="brands__list">
                <a th:each="th : ${thuongHieuList}" th:href="@{/san-pham(thuongHieuId=${th.id})}" class="brands__item" th:text="${th.tenThuongHieu}">Th∆∞∆°ng hi·ªáu</a>
            </div>
        </div>
    </section>

    <!-- Tin t·ª©c / Blog -->
    <section class="section blog">
        <div class="container">
            <div class="section__head">
                <h2 class="section__title">Tin t·ª©c &amp; Blog</h2>
                <a th:href="@{/tin-tuc}" class="link-more">Xem t·∫•t c·∫£ ‚Üí</a>
            </div>
            <div class="blog__grid" th:if="${blogMoi != null and !blogMoi.isEmpty()}">
                <article th:each="blog : ${blogMoi}" class="blog-card">
                    <a th:href="@{/tin-tuc/{id}(id=${blog.id})}" class="blog-card__link">
                        <div class="blog-card__img-wrap" th:if="${blog.hinhAnh != null and !blog.hinhAnh.isEmpty()}">
                            <img th:src="${blog.hinhAnh}" th:alt="${blog.tieuDe}" class="blog-card__img">
                        </div>
                        <div class="blog-card__img-wrap blog-card__img-wrap--placeholder" th:if="${blog.hinhAnh == null or blog.hinhAnh.isEmpty()}">
                            <span>üì∞</span>
                        </div>
                        <div class="blog-card__body">
                            <h3 class="blog-card__title" th:text="${blog.tieuDe}">Ti√™u ƒë·ªÅ</h3>
                            <time class="blog-card__date" th:if="${blog.ngayDang != null}" th:text="${#temporals.format(blog.ngayDang, 'dd/MM/yyyy')}">Ng√†y</time>
                        </div>
                    </a>
                </article>
            </div>
            <p th:if="${blogMoi == null or blogMoi.isEmpty()}" class="section__empty">Ch∆∞a c√≥ b√†i vi·∫øt.</p>
        </div>
    </section>

    <!-- ∆Øu ƒë√£i / H·ªó tr·ª£ -->
    <section class="section features">
        <div class="container">
            <div class="features__grid">
                <div class="feature-item">
                    <span class="feature-item__icon">üöö</span>
                    <h3 class="feature-item__title">Giao h√†ng to√†n qu·ªëc</h3>
                    <p class="feature-item__text">Mi·ªÖn ph√≠ ƒë∆°n t·ª´ 3 tri·ªáu</p>
                </div>
                <div class="feature-item">
                    <span class="feature-item__icon">üõ°Ô∏è</span>
                    <h3 class="feature-item__title">B·∫£o h√†nh ch√≠nh h√£ng</h3>
                    <p class="feature-item__text">B·∫£o h√†nh 1‚Äì2 nƒÉm t√πy th∆∞∆°ng hi·ªáu</p>
                </div>
                <div class="feature-item">
                    <span class="feature-item__icon">‚Ü©Ô∏è</span>
                    <h3 class="feature-item__title">ƒê·ªïi tr·∫£ 30 ng√†y</h3>
                    <p class="feature-item__text">ƒê·ªïi tr·∫£ n·∫øu l·ªói nh√† s·∫£n xu·∫•t</p>
                </div>
                <div class="feature-item">
                    <span class="feature-item__icon">üìû</span>
                    <h3 class="feature-item__title">H·ªó tr·ª£ 24/7</h3>
                    <p class="feature-item__text">Hotline: 1900 xxxx</p>
                </div>
            </div>
        </div>
    </section>

</div>

</body>
</html>
